# Новогодний Бот - Инструкция по использованию

## Описание

Новогодний Бот - это интерактивный бот для чатов, который предлагает новогодние игры и развлечения. Бот может работать как в обычных чатах, так и в каналах.

## Возможности

1. **Команда /start** - Запускает бота и показывает меню с выбором игр
2. **Квиз (/quiz)** - Новогодний квиз с вопросами о праздновании Нового года
3. **Отгадывание слова (/word)** - Игра на отгадывание новогодних слов

## Как использовать

### Добавление бота в чат

1. Откройте любой чат (приватный или групповой)
2. Напишите команду `/start`
3. Бот автоматически добавится в чат и покажет меню

### Команды бота

- `/start` - Показать меню с выбором игр
- `/quiz` - Начать новогодний квиз
- `/word` - Начать игру "Отгадывание слова"

### Игра "Квиз"

1. Напишите `/quiz` в чате
2. Бот отправит вопрос с вариантами ответов
3. Ответьте номером правильного ответа (1, 2, 3 или 4)
4. Бот покажет правильный ответ и статистику ответов участников

### Игра "Отгадывание слова"

1. Напишите `/word` в чате
2. Бот загадает новогоднее слово
3. У вас есть 7 попыток, чтобы угадать слово
4. Вы можете:
   - Называть буквы по одной
   - Угадывать слово целиком
5. Бот будет показывать угаданные буквы и количество оставшихся попыток

## Технические детали

### Структура базы данных

- **Bot** - Модель бота
- **BotMember** - Связь ботов с чатами
- **BotGame** - Активные игры в чатах
- **BotVote** - Ответы пользователей на квизы

### API функции

Все функции находятся в `app/lib/api/bot.ts`:

- `getOrCreateNewYearBot()` - Получить или создать бота
- `addBotToChat()` - Добавить бота в чат
- `sendBotMessage()` - Отправить сообщение от бота
- `processBotCommand()` - Обработать команду пользователя
- `createQuiz()` - Создать квиз
- `createWordGuessGame()` - Создать игру "Отгадывание слова"
- `handleQuizAnswer()` - Обработать ответ на квиз
- `handleWordGuessAnswer()` - Обработать ответ в игре "Отгадывание слова"

### Миграция базы данных

После обновления схемы Prisma выполните:

```bash
npx prisma migrate dev --name add_bot_support
```

### Инициализация бота

Для создания бота в базе данных выполните:

```bash
npx tsx scripts/init-bot.ts
```

Или бот будет создан автоматически при первом использовании команды `/start`.

## Новогодние слова для игры

Бот использует следующие слова:
- СНЕГОВИК
- ЕЛКА
- ПОДАРОК
- САЛЮТ
- ХЛОПУШКА
- МАНДАРИН
- ОЛЕНЬ
- САНКИ
- СНЕЖИНКА
- ГИРЛЯНДА
- И другие...

## Новогодние вопросы для квиза

Бот задает вопросы о:
- Традициях празднования Нового года
- Символах и атрибутах праздника
- Популярных фильмах и обычаях
- И других новогодних темах

## Примечания

- Бот работает в любых чатах (приватных, групповых, каналах)
- Каждый пользователь может ответить на квиз только один раз
- Игры автоматически завершаются через 24 часа
- Сообщения от ботов отображаются с аватаром и именем бота

